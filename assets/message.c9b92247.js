import{b as V,d as P,v as w,a as p,c as $,e as j,Q as B,w as T,D as A,E as O,u as d,g as k,n as f,k as q,T as Y,m as J,f as M,r as I,o as K,A as Q,K as _,h as b,Y as C,j as X,F as R,ak as W,x as ee,aX as D,aJ as h,H as se,G as E,V as oe,aY as H,aZ as ae}from"./index.78e2b5e2.js";import{u as Z,l as N,_ as U,a as ne,E as le,a0 as te,a1 as L,k as re,e as ie,i as ce,q as F}from"./button.14e5f778.js";import{E as me}from"./aria2.e9b02c40.js";import{u as ge}from"./focus-trap2.e64b94b1.js";const ue=V({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),de=["textContent"],pe={name:"ElBadge"},fe=P({...pe,props:ue,setup(e,{expose:o}){const s=e,a=Z("badge"),n=w(()=>s.isDot?"":N(s.value)&&N(s.max)?s.max<s.value?`${s.max}+`:`${s.value}`:`${s.value}`);return o({content:n}),(l,t)=>(p(),$("div",{class:f(d(a).b())},[j(l.$slots,"default"),B(Y,{name:`${d(a).namespace.value}-zoom-in-center`,persisted:""},{default:T(()=>[A(k("sup",{class:f([d(a).e("content"),d(a).em("content",l.type),d(a).is("fixed",!!l.$slots.default),d(a).is("dot",l.isDot)]),textContent:q(d(n))},null,10,de),[[O,!l.hidden&&(d(n)||l.isDot)]])]),_:1},8,["name"])],2))}});var ve=U(fe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const ye=J(ve),G=["success","info","warning","error"],be=V({customClass:{type:String,default:""},center:{type:Boolean,default:!1},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:3e3},icon:{type:ne,default:""},id:{type:String,default:""},message:{type:M([String,Object,Function]),default:""},onClose:{type:M(Function),required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:G,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}}),he={destroy:()=>!0},Ce=P({name:"ElMessage",components:{ElBadge:ye,ElIcon:le,...te},props:be,emits:he,setup(e){const o=Z("message"),s=I(!1),a=I(e.type?e.type==="error"?"danger":e.type:"info");let n;const l=w(()=>{const u=e.type;return{[o.bm("icon",u)]:u&&L[u]}}),t=w(()=>e.icon||L[e.type]||""),i=w(()=>({top:`${e.offset}px`,zIndex:e.zIndex}));function m(){e.duration>0&&({stop:n}=ie(()=>{s.value&&g()},e.duration))}function c(){n==null||n()}function g(){s.value=!1}function v({code:u}){u===me.esc?s.value&&g():m()}return K(()=>{m(),s.value=!0}),Q(()=>e.repeatNum,()=>{c(),m()}),re(document,"keydown",v),{ns:o,typeClass:l,iconComponent:t,customStyle:i,visible:s,badgeType:a,close:g,clearTimer:c,startTimer:m}}}),we=["id"],Te=["innerHTML"];function _e(e,o,s,a,n,l){const t=_("el-badge"),i=_("el-icon"),m=_("close");return p(),b(Y,{name:e.ns.b("fade"),onBeforeLeave:e.onClose,onAfterLeave:o[2]||(o[2]=c=>e.$emit("destroy")),persisted:""},{default:T(()=>[A(k("div",{id:e.id,class:f([e.ns.b(),{[e.ns.m(e.type)]:e.type&&!e.icon},e.ns.is("center",e.center),e.ns.is("closable",e.showClose),e.customClass]),style:ee(e.customStyle),role:"alert",onMouseenter:o[0]||(o[0]=(...c)=>e.clearTimer&&e.clearTimer(...c)),onMouseleave:o[1]||(o[1]=(...c)=>e.startTimer&&e.startTimer(...c))},[e.repeatNum>1?(p(),b(t,{key:0,value:e.repeatNum,type:e.badgeType,class:f(e.ns.e("badge"))},null,8,["value","type","class"])):C("v-if",!0),e.iconComponent?(p(),b(i,{key:1,class:f([e.ns.e("icon"),e.typeClass])},{default:T(()=>[(p(),b(X(e.iconComponent)))]),_:1},8,["class"])):C("v-if",!0),j(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(p(),$(R,{key:1},[C(" Caution here, message could've been compromised, never use user's input as message "),k("p",{class:f(e.ns.e("content")),innerHTML:e.message},null,10,Te)],2112)):(p(),$("p",{key:0,class:f(e.ns.e("content"))},q(e.message),3))]),e.showClose?(p(),b(i,{key:2,class:f(e.ns.e("closeBtn")),onClick:W(e.close,["stop"])},{default:T(()=>[B(m)]),_:1},8,["class","onClick"])):C("v-if",!0)],46,we),[[O,e.visible]])]),_:3},8,["name","onBeforeLeave"])}var $e=U(Ce,[["render",_e],["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);const r=[];let ke=1;const y=function(e={},o){if(!ce)return{close:()=>{}};if(N(D.max)&&r.length>=D.max)return{close:()=>{}};if(!h(e)&&se(e)&&e.grouping&&!h(e.message)&&r.length){const v=r.find(u=>{var S,x,z;return`${(x=(S=u.vm.props)==null?void 0:S.message)!=null?x:""}`==`${(z=e.message)!=null?z:""}`});if(v)return v.vm.component.props.repeatNum+=1,v.vm.component.props.type=(e==null?void 0:e.type)||"info",{close:()=>g.component.proxy.visible=!1}}(E(e)||h(e))&&(e={message:e});let s=e.offset||20;r.forEach(({vm:v})=>{var u;s+=(((u=v.el)==null?void 0:u.offsetHeight)||0)+16}),s+=16;const{nextZIndex:a}=ge(),n=`message_${ke++}`,l=e.onClose,t={zIndex:a(),...e,offset:s,id:n,onClose:()=>{Ee(n,l)}};let i=document.body;F(e.appendTo)?i=e.appendTo:E(e.appendTo)&&(i=document.querySelector(e.appendTo)),F(i)||(i=document.body);const m=document.createElement("div");m.className=`container_${n}`;const c=t.message,g=B($e,t,oe(c)?{default:c}:h(c)?{default:()=>c}:null);return g.appContext=o||y._context,g.props.onDestroy=()=>{H(null,m)},H(g,m),r.push({vm:g}),i.appendChild(m.firstElementChild),{close:()=>g.component.proxy.visible=!1}};G.forEach(e=>{y[e]=(o={},s)=>((E(o)||h(o))&&(o={message:o}),y({...o,type:e},s))});function Ee(e,o){const s=r.findIndex(({vm:t})=>e===t.component.props.id);if(s===-1)return;const{vm:a}=r[s];if(!a)return;o==null||o(a);const n=a.el.offsetHeight;r.splice(s,1);const l=r.length;if(!(l<1))for(let t=s;t<l;t++){const i=Number.parseInt(r[t].vm.el.style.top,10)-n-16;r[t].vm.component.props.offset=i}}function Ne(){var e;for(let o=r.length-1;o>=0;o--){const s=r[o].vm.component;(e=s==null?void 0:s.proxy)==null||e.close()}}y.closeAll=Ne;y._context=null;const Me=ae(y,"$message");export{Me as E};
