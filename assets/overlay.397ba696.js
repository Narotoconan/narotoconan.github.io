import{o as ee,aa as ce,B as ue,an as fe,A as H,ac as me,Z as R,b as j,f as V,d as q,Q as $,e as C,C as pe,i as U,v as A,a as T,c as N,g as P,n as k,u as o,k as ge,w as x,h as X,j as ve,Y as W,x as oe,ak as ye,r as M,ag as he,I as be,l as Ce,s as ke,p as we,D as Ee,E as xe,a8 as Me,T as _e,a2 as Ie,m as Be}from"./index.a6bf5d43.js";import{n as Z,t as Te,i as te,h as K,I as J,b as ze,r as De,u as ae,a as Se,E as Le,_ as le,J as $e,g as Ae,x as G,l as Oe,K as Fe,e as Q,L as Pe}from"./button.faf7d773.js";import{P as Y}from"./vnode2.3859dba3.js";import{a as Re,F as Ne,u as Ye,E as He}from"./focus-trap2.58d2497a.js";import{c as Ve}from"./refs2.2357a2e1.js";import{m as ne}from"./input.96d5573d.js";import{g as Xe}from"./scroll2.c7fc2d83.js";const se=Symbol("dialogInjectionKey"),We=(e,t,r)=>{let s={offsetX:0,offsetY:0};const c=n=>{const d=n.clientX,y=n.clientY,{offsetX:m,offsetY:p}=s,a=e.value.getBoundingClientRect(),f=a.left,w=a.top,z=a.width,D=a.height,_=document.documentElement.clientWidth,S=document.documentElement.clientHeight,L=-f+m,I=-w+p,E=_-f-z+m,v=S-w-D+p,B=g=>{const h=Math.min(Math.max(m+g.clientX-d,L),E),O=Math.min(Math.max(p+g.clientY-y,I),v);s={offsetX:h,offsetY:O},e.value.style.transform=`translate(${Z(h)}, ${Z(O)})`},l=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",l)},u=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",c)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",c)};ee(()=>{ce(()=>{r.value?u():i()})}),ue(()=>{i()})},je=e=>{if(fe(e)||Te("[useLockscreen]","You need to pass a ref param to this function"),!te||K(document.body,"el-popup-parent--hidden"))return;let t=0,r=!1,s="0",c=0;const u=()=>{De(document.body,"el-popup-parent--hidden"),r&&(document.body.style.paddingRight=s)};H(e,i=>{if(!i){u();return}r=!K(document.body,"el-popup-parent--hidden"),r&&(s=document.body.style.paddingRight,c=Number.parseInt(J(document.body,"paddingRight"),10)),t=Xe();const n=document.documentElement.clientHeight<document.body.scrollHeight,d=J(document.body,"overflowY");t>0&&(n||d==="scroll")&&r&&(document.body.style.paddingRight=`${c+t}px`),ze(document.body,"el-popup-parent--hidden")}),me(()=>u())},ie=e=>{if(!e)return{onClick:R,onMousedown:R,onMouseup:R};let t=!1,r=!1;return{onClick:i=>{t&&r&&e(i),t=r=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{r=i.target===i.currentTarget}}},qe=j({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:V([String,Array,Object])},zIndex:{type:V([String,Number])}}),Ue={click:e=>e instanceof MouseEvent};var Ze=q({name:"ElOverlay",props:qe,emits:Ue,setup(e,{slots:t,emit:r}){const s=ae("overlay"),c=d=>{r("click",d)},{onClick:u,onMousedown:i,onMouseup:n}=ie(e.customMaskEvent?void 0:c);return()=>e.mask?$("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:i,onMouseup:n},[C(t,"default")],Y.STYLE|Y.CLASS|Y.PROPS,["onClick","onMouseup","onMousedown"]):pe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const Ke=Ze,re=j({center:{type:Boolean,default:!1},closeIcon:{type:Se,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Je={close:()=>!0},Ge=["aria-label"],Qe=["id"],eo={name:"ElDialogContent"},oo=q({...eo,props:re,emits:Je,setup(e){const t=e,{t:r}=Re(),{Close:s}=$e,{dialogRef:c,headerRef:u,bodyId:i,ns:n,style:d}=U(se),{focusTrapRef:y}=U(Ne),m=Ve(y,c),p=A(()=>t.draggable);return We(c,u,p),(a,f)=>(T(),N("div",{ref:o(m),class:k([o(n).b(),o(n).is("fullscreen",a.fullscreen),o(n).is("draggable",o(p)),{[o(n).m("center")]:a.center},a.customClass]),style:oe(o(d)),tabindex:"-1",onClick:f[1]||(f[1]=ye(()=>{},["stop"]))},[P("header",{ref_key:"headerRef",ref:u,class:k(o(n).e("header"))},[C(a.$slots,"header",{},()=>[P("span",{role:"heading",class:k(o(n).e("title"))},ge(a.title),3)]),a.showClose?(T(),N("button",{key:0,"aria-label":o(r)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=w=>a.$emit("close"))},[$(o(Le),{class:k(o(n).e("close"))},{default:x(()=>[(T(),X(ve(a.closeIcon||o(s))))]),_:1},8,["class"])],10,Ge)):W("v-if",!0)],2),P("div",{id:o(i),class:k(o(n).e("body"))},[C(a.$slots,"default")],10,Qe),a.$slots.footer?(T(),N("footer",{key:0,class:k(o(n).e("footer"))},[C(a.$slots,"footer")],2)):W("v-if",!0)],6))}});var to=le(oo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ao=j({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:V(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),lo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>Ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},no=(e,t)=>{const s=Ce().emit,{nextZIndex:c}=Ye();let u="";const i=G(),n=G(),d=M(!1),y=M(!1),m=M(!1),p=M(e.zIndex||c());let a,f;const w=A(()=>Oe(e.width)?`${e.width}px`:e.width),z=he("namespace",Fe),D=A(()=>{const b={},F=`--${z.value}-dialog`;return e.fullscreen||(e.top&&(b[`${F}-margin-top`]=e.top),e.width&&(b[`${F}-width`]=w.value)),b});function _(){s("opened")}function S(){s("closed"),s(ne,!1),e.destroyOnClose&&(m.value=!1)}function L(){s("close")}function I(){f==null||f(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=Q(()=>l(),e.openDelay):l()}function E(){a==null||a(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=Q(()=>g(),e.closeDelay):g()}function v(){function b(F){F||(y.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(b):E()}function B(){e.closeOnClickModal&&v()}function l(){!te||(d.value=!0)}function g(){d.value=!1}function h(){s("openAutoFocus")}function O(){s("closeAutoFocus")}e.lockScroll&&je(d);function de(){e.closeOnPressEscape&&v()}return H(()=>e.modelValue,b=>{b?(y.value=!1,I(),m.value=!0,s("open"),p.value=e.zIndex?p.value++:c(),be(()=>{t.value&&(t.value.scrollTop=0)})):d.value&&E()}),H(()=>e.fullscreen,b=>{!t.value||(b?(u=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=u)}),ee(()=>{e.modelValue&&(d.value=!0,m.value=!0,I())}),{afterEnter:_,afterLeave:S,beforeLeave:L,handleClose:v,onModalClick:B,close:E,doClose:g,onOpenAutoFocus:h,onCloseAutoFocus:O,onCloseRequested:de,titleId:i,bodyId:n,closed:y,style:D,rendered:m,visible:d,zIndex:p}},so=["aria-label","aria-labelledby","aria-describedby"],io={name:"ElDialog"},ro=q({...io,props:ao,emits:lo,setup(e,{expose:t}){const r=e,s=ke();Pe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},A(()=>!!s.title));const c=ae("dialog"),u=M(),i=M(),n=M(),{visible:d,titleId:y,bodyId:m,style:p,rendered:a,zIndex:f,afterEnter:w,afterLeave:z,beforeLeave:D,handleClose:_,onModalClick:S,onOpenAutoFocus:L,onCloseAutoFocus:I,onCloseRequested:E}=no(r,u);we(se,{dialogRef:u,headerRef:i,bodyId:m,ns:c,rendered:a,style:p});const v=ie(S),B=A(()=>r.draggable&&!r.fullscreen);return t({visible:d,dialogContentRef:n}),(l,g)=>(T(),X(Ie,{to:"body",disabled:!l.appendToBody},[$(_e,{name:"dialog-fade",onAfterEnter:o(w),onAfterLeave:o(z),onBeforeLeave:o(D),persisted:""},{default:x(()=>[Ee($(o(Ke),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(f)},{default:x(()=>[P("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(y),"aria-describedby":o(m),class:k(`${o(c).namespace.value}-overlay-dialog`),onClick:g[0]||(g[0]=(...h)=>o(v).onClick&&o(v).onClick(...h)),onMousedown:g[1]||(g[1]=(...h)=>o(v).onMousedown&&o(v).onMousedown(...h)),onMouseup:g[2]||(g[2]=(...h)=>o(v).onMouseup&&o(v).onMouseup(...h))},[$(o(He),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(I),onReleaseRequested:o(E)},{default:x(()=>[o(a)?(T(),X(to,{key:0,ref_key:"dialogContentRef",ref:n,"custom-class":l.customClass,center:l.center,"close-icon":l.closeIcon,draggable:o(B),fullscreen:l.fullscreen,"show-close":l.showClose,style:oe(o(p)),title:l.title,onClose:o(_)},Me({header:x(()=>[l.$slots.title?C(l.$slots,"title",{key:1}):C(l.$slots,"header",{key:0,close:o(_),titleId:o(y),titleClass:o(c).e("title")})]),default:x(()=>[C(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:x(()=>[C(l.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","style","title","onClose"])):W("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,so)]),_:3},8,["mask","overlay-class","z-index"]),[[xe,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var co=le(ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ho=Be(co);export{ho as E,lo as a,Ke as b,ao as d,no as u};
