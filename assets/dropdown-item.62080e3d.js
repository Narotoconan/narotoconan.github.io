import{_ as D,x as de,a as Ce,y as ie,E as pe,c as Te,u as ee,n as $e}from"./button.faf7d773.js";import{o as ke,b as Oe,c as R,u as Fe,d as Ne,e as Re,E as Se,O as Ke,w as se}from"./popper.f9e7652b.js";import{e as S,r as y,p as G,i as C,o as ue,u as h,B as ce,b as W,f as K,d as z,v as T,a4 as Pe,J as U,A as De,K as I,a as P,h as Y,w as _,Q as F,a5 as Me,a6 as Be,I as Le,a7 as Ae,l as me,c as j,a8 as ze,y as J,n as Z,Y as x,g as Ge,j as Ye,F as Ue,x as Je,m as He,q as fe}from"./index.a6bf5d43.js";import{E as g}from"./aria2.e9b02c40.js";import{a as Ve,F as je}from"./focus-trap2.58d2497a.js";import{c as ve}from"./refs2.2357a2e1.js";const We={inheritAttrs:!1};function qe(e,o,a,t,d,u){return S(e.$slots,"default")}var Qe=D(We,[["render",qe],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Xe={name:"ElCollectionItem",inheritAttrs:!1};function Ze(e,o,a,t,d,u){return S(e.$slots,"default")}var xe=D(Xe,[["render",Ze],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const ge="data-el-collection-item",we=e=>{const o=`El${e}Collection`,a=`${o}Item`,t=Symbol(o),d=Symbol(a),u={...Qe,name:o,setup(){const r=y(null),p=new Map;G(t,{itemMap:p,getItems:()=>{const m=h(r);if(!m)return[];const c=Array.from(m.querySelectorAll(`[${ge}]`));return[...p.values()].sort((n,i)=>c.indexOf(n.ref)-c.indexOf(i.ref))},collectionRef:r})}},l={...xe,name:a,setup(r,{attrs:p}){const v=y(null),m=C(t,void 0);G(d,{collectionItemRef:v}),ue(()=>{const c=h(v);c&&m.itemMap.set(c,{ref:c,...p})}),ce(()=>{const c=h(v);m.itemMap.delete(c)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:d,ElCollection:u,ElCollectionItem:l}},eo=W({style:{type:K([String,Array,Object])},currentTabId:{type:K(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:K(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:oo,ElCollectionItem:no,COLLECTION_INJECTION_KEY:oe,COLLECTION_ITEM_INJECTION_KEY:to}=we("RovingFocusGroup"),ne=Symbol("elRovingFocusGroup"),be=Symbol("elRovingFocusGroupItem"),ro={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},lo=(e,o)=>{if(o!=="rtl")return e;switch(e){case g.right:return g.left;case g.left:return g.right;default:return e}},so=(e,o,a)=>{const t=lo(e.key,a);if(!(o==="vertical"&&[g.left,g.right].includes(t))&&!(o==="horizontal"&&[g.up,g.down].includes(t)))return ro[t]},ao=(e,o)=>e.map((a,t)=>e[(t+o)%e.length]),te=e=>{const{activeElement:o}=document;for(const a of e)if(a===o||(a.focus(),o!==document.activeElement))return},ae="currentTabIdChange",X="rovingFocusGroup.entryFocus",io={bubbles:!1,cancelable:!0},po=z({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:eo,emits:[ae,"entryFocus"],setup(e,{emit:o}){var a;const t=y((a=e.currentTabId||e.defaultCurrentTabId)!=null?a:null),d=y(!1),u=y(!1),l=y(null),{getItems:r}=C(oe,void 0),p=T(()=>[{outline:"none"},e.style]),v=s=>{o(ae,s)},m=()=>{d.value=!0},c=R(s=>{var w;(w=e.onMousedown)==null||w.call(e,s)},()=>{u.value=!0}),E=R(s=>{var w;(w=e.onFocus)==null||w.call(e,s)},s=>{const w=!h(u),{target:M,currentTarget:$}=s;if(M===$&&w&&!h(d)){const B=new Event(X,io);if($==null||$.dispatchEvent(B),!B.defaultPrevented){const b=r().filter(O=>O.focusable),N=b.find(O=>O.active),k=b.find(O=>O.id===h(t)),A=[N,k,...b].filter(Boolean).map(O=>O.ref);te(A)}}u.value=!1}),n=R(s=>{var w;(w=e.onBlur)==null||w.call(e,s)},()=>{d.value=!1}),i=(...s)=>{o("entryFocus",...s)};G(ne,{currentTabbedId:Pe(t),loop:U(e,"loop"),tabIndex:T(()=>h(d)?-1:0),rovingFocusGroupRef:l,rovingFocusGroupRootStyle:p,orientation:U(e,"orientation"),dir:U(e,"dir"),onItemFocus:v,onItemShiftTab:m,onBlur:n,onFocus:E,onMousedown:c}),De(()=>e.currentTabId,s=>{t.value=s!=null?s:null}),ue(()=>{const s=h(l);ke(s,X,i)}),ce(()=>{const s=h(l);Oe(s,X,i)})}});function uo(e,o,a,t,d,u){return S(e.$slots,"default")}var co=D(po,[["render",uo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const mo=z({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:oo,ElRovingFocusGroupImpl:co}});function fo(e,o,a,t,d,u){const l=I("el-roving-focus-group-impl"),r=I("el-focus-group-collection");return P(),Y(r,null,{default:_(()=>[F(l,Me(Be(e.$attrs)),{default:_(()=>[S(e.$slots,"default")]),_:3},16)]),_:3})}var vo=D(mo,[["render",fo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const go=z({components:{ElRovingFocusCollectionItem:no},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:a,loop:t,onItemFocus:d,onItemShiftTab:u}=C(ne,void 0),{getItems:l}=C(oe,void 0),r=de(),p=y(null),v=R(n=>{o("mousedown",n)},n=>{e.focusable?d(h(r)):n.preventDefault()}),m=R(n=>{o("focus",n)},()=>{d(h(r))}),c=R(n=>{o("keydown",n)},n=>{const{key:i,shiftKey:s,target:w,currentTarget:M}=n;if(i===g.tab&&s){u();return}if(w!==M)return;const $=so(n);if($){n.preventDefault();let b=l().filter(N=>N.focusable).map(N=>N.ref);switch($){case"last":{b.reverse();break}case"prev":case"next":{$==="prev"&&b.reverse();const N=b.indexOf(M);b=t.value?ao(b,N+1):b.slice(N+1);break}}Le(()=>{te(b)})}}),E=T(()=>a.value===h(r));return G(be,{rovingFocusGroupItemRef:p,tabIndex:T(()=>h(E)?0:-1),handleMousedown:v,handleFocus:m,handleKeydown:c}),{id:r,handleKeydown:c,handleFocus:m,handleMousedown:v}}});function wo(e,o,a,t,d,u){const l=I("el-roving-focus-collection-item");return P(),Y(l,{id:e.id,focusable:e.focusable,active:e.active},{default:_(()=>[S(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var bo=D(go,[["render",wo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const _o=W({trigger:Fe.trigger,effect:{...Ne.effect,default:"light"},type:{type:K(String)},placement:{type:K(String),default:"bottom"},popperOptions:{type:K(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:K([Number,String]),default:0},maxHeight:{type:K([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:K(Object)}}),_e=W({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Ce}}),Io=W({onKeydown:{type:K(Function)}}),ho=[g.down,g.pageDown,g.home],Ie=[g.up,g.pageUp,g.end],Eo=[...ho,...Ie],{ElCollection:yo,ElCollectionItem:Co,COLLECTION_INJECTION_KEY:To,COLLECTION_ITEM_INJECTION_KEY:$o}=we("Dropdown"),q=Symbol("elDropdown"),{ButtonGroup:ko}=ie,Oo=z({name:"ElDropdown",components:{ElButton:ie,ElButtonGroup:ko,ElScrollbar:Re,ElDropdownCollection:yo,ElTooltip:Se,ElRovingFocusGroup:vo,ElOnlyChild:Ke,ElIcon:pe,ArrowDown:Te},props:_o,emits:["visible-change","click","command"],setup(e,{emit:o}){const a=me(),t=ee("dropdown"),{t:d}=Ve(),u=y(),l=y(),r=y(null),p=y(null),v=y(null),m=y(null),c=y(!1),E=[g.enter,g.space,g.down],n=T(()=>({maxHeight:$e(e.maxHeight)})),i=T(()=>[t.m(b.value)]),s=de().value,w=T(()=>e.id||s);function M(){$()}function $(){var f;(f=r.value)==null||f.onClose()}function B(){var f;(f=r.value)==null||f.onOpen()}const b=Ae();function N(...f){o("command",...f)}function k(){}function L(){const f=h(p);f==null||f.focus(),m.value=null}function A(f){m.value=f}function O(f){c.value||(f.preventDefault(),f.stopImmediatePropagation())}function re(f){(f==null?void 0:f.type)==="keydown"&&p.value.focus(),o("visible-change",!0)}function H(){o("visible-change",!1)}return G(q,{contentRef:p,role:T(()=>e.role),triggerId:w,isUsingKeyboard:c,onItemEnter:k,onItemLeave:L}),G("elDropdown",{instance:a,dropdownSize:b,handleClick:M,commandHandler:N,trigger:U(e,"trigger"),hideOnClick:U(e,"hideOnClick")}),{t:d,ns:t,scrollbar:v,wrapStyle:n,dropdownTriggerKls:i,dropdownSize:b,triggerId:w,triggerKeys:E,currentTabId:m,handleCurrentTabIdChange:A,handlerMainButtonClick:f=>{o("click",f)},handleEntryFocus:O,handleClose:$,handleOpen:B,handleShowTooltip:re,handleHideTooltip:H,onFocusAfterTrapped:f=>{var Q,le;f.preventDefault(),(le=(Q=p.value)==null?void 0:Q.focus)==null||le.call(Q,{preventScroll:!0})},popperRef:r,contentRef:p,triggeringElementRef:u,referenceElementRef:l}}});function Fo(e,o,a,t,d,u){var l;const r=I("el-dropdown-collection"),p=I("el-roving-focus-group"),v=I("el-scrollbar"),m=I("el-only-child"),c=I("el-tooltip"),E=I("el-button"),n=I("arrow-down"),i=I("el-icon"),s=I("el-button-group");return P(),j("div",{class:Z([e.ns.b(),e.ns.is("disabled",e.disabled)])},[F(c,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(l=e.referenceElementRef)==null?void 0:l.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:"",pure:"",persistent:"",onShow:e.handleShowTooltip,onHide:e.handleHideTooltip},ze({content:_(()=>[F(v,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:_(()=>[F(p,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:_(()=>[F(r,null,{default:_(()=>[S(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:_(()=>[F(m,{id:e.triggerId,role:"button",tabindex:e.tabindex},{default:_(()=>[S(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","onShow","onHide"]),e.splitButton?(P(),Y(s,{key:0},{default:_(()=>[F(E,J({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:_(()=>[S(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),F(E,J({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:_(()=>[F(i,{class:Z(e.ns.e("icon"))},{default:_(()=>[F(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):x("v-if",!0)],2)}var No=D(Oo,[["render",Fo],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const Ro=z({name:"DropdownItemImpl",components:{ElIcon:pe},props:_e,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const a=ee("dropdown"),{role:t}=C(q,void 0),{collectionItemRef:d}=C($o,void 0),{collectionItemRef:u}=C(to,void 0),{rovingFocusGroupItemRef:l,tabIndex:r,handleFocus:p,handleKeydown:v,handleMousedown:m}=C(be,void 0),c=ve(d,u,l),E=T(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),n=R(i=>{const{code:s}=i;if(s===g.enter||s===g.space)return i.preventDefault(),i.stopImmediatePropagation(),o("clickimpl",i),!0},v);return{ns:a,itemRef:c,dataset:{[ge]:""},role:E,tabIndex:r,handleFocus:p,handleKeydown:n,handleMousedown:m}}}),So=["aria-disabled","tabindex","role"];function Ko(e,o,a,t,d,u){const l=I("el-icon");return P(),j(Ue,null,[e.divided?(P(),j("li",J({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):x("v-if",!0),Ge("li",J({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=r=>e.$emit("clickimpl",r)),onFocus:o[1]||(o[1]=(...r)=>e.handleFocus&&e.handleFocus(...r)),onKeydown:o[2]||(o[2]=(...r)=>e.handleKeydown&&e.handleKeydown(...r)),onMousedown:o[3]||(o[3]=(...r)=>e.handleMousedown&&e.handleMousedown(...r)),onPointermove:o[4]||(o[4]=r=>e.$emit("pointermove",r)),onPointerleave:o[5]||(o[5]=r=>e.$emit("pointerleave",r))}),[e.icon?(P(),Y(l,{key:0},{default:_(()=>[(P(),Y(Ye(e.icon)))]),_:1})):x("v-if",!0),S(e.$slots,"default")],16,So)],64)}var Po=D(Ro,[["render",Ko],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const he=()=>{const e=C("elDropdown",{}),o=T(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},Do=z({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Co,ElRovingFocusItem:bo,ElDropdownItemImpl:Po},inheritAttrs:!1,props:_e,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:a}){const{elDropdown:t}=he(),d=me(),u=y(null),l=T(()=>{var n,i;return(i=(n=h(u))==null?void 0:n.textContent)!=null?i:""}),{onItemEnter:r,onItemLeave:p}=C(q,void 0),v=R(n=>(o("pointermove",n),n.defaultPrevented),se(n=>{var i;e.disabled?p(n):(r(n),n.defaultPrevented||(i=n.currentTarget)==null||i.focus())})),m=R(n=>(o("pointerleave",n),n.defaultPrevented),se(n=>{p(n)})),c=R(n=>(o("click",n),n.type!=="keydown"&&n.defaultPrevented),n=>{var i,s,w;if(e.disabled){n.stopImmediatePropagation();return}(i=t==null?void 0:t.hideOnClick)!=null&&i.value&&((s=t.handleClick)==null||s.call(t)),(w=t.commandHandler)==null||w.call(t,e.command,d,n)}),E=T(()=>({...e,...a}));return{handleClick:c,handlePointerMove:v,handlePointerLeave:m,textContent:l,propsAndAttrs:E}}});function Mo(e,o,a,t,d,u){var l;const r=I("el-dropdown-item-impl"),p=I("el-roving-focus-item"),v=I("el-dropdown-collection-item");return P(),Y(v,{disabled:e.disabled,"text-value":(l=e.textValue)!=null?l:e.textContent},{default:_(()=>[F(p,{focusable:!e.disabled},{default:_(()=>[F(r,J(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:_(()=>[S(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Ee=D(Do,[["render",Mo],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const Bo=z({name:"ElDropdownMenu",props:Io,setup(e){const o=ee("dropdown"),{_elDropdownSize:a}=he(),t=a.value,{focusTrapRef:d,onKeydown:u}=C(je,void 0),{contentRef:l,role:r,triggerId:p}=C(q,void 0),{collectionRef:v,getItems:m}=C(To,void 0),{rovingFocusGroupRef:c,rovingFocusGroupRootStyle:E,tabIndex:n,onBlur:i,onFocus:s,onMousedown:w}=C(ne,void 0),{collectionRef:M}=C(oe,void 0),$=T(()=>[o.b("menu"),o.bm("menu",t==null?void 0:t.value)]),B=ve(l,v,d,c,M),b=R(k=>{var L;(L=e.onKeydown)==null||L.call(e,k)},k=>{const{currentTarget:L,code:A,target:O}=k;if(L.contains(O),g.tab===A&&k.stopImmediatePropagation(),k.preventDefault(),O!==h(l)||!Eo.includes(A))return;const H=m().filter(V=>!V.disabled).map(V=>V.ref);Ie.includes(A)&&H.reverse(),te(H)});return{size:t,rovingFocusGroupRootStyle:E,tabIndex:n,dropdownKls:$,role:r,triggerId:p,dropdownListWrapperRef:B,handleKeydown:k=>{b(k),u(k)},onBlur:i,onFocus:s,onMousedown:w}}}),Lo=["role","aria-labelledby"];function Ao(e,o,a,t,d,u){return P(),j("ul",{ref:e.dropdownListWrapperRef,class:Z(e.dropdownKls),style:Je(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...l)=>e.onBlur&&e.onBlur(...l)),onFocus:o[1]||(o[1]=(...l)=>e.onFocus&&e.onFocus(...l)),onKeydown:o[2]||(o[2]=(...l)=>e.handleKeydown&&e.handleKeydown(...l)),onMousedown:o[3]||(o[3]=(...l)=>e.onMousedown&&e.onMousedown(...l))},[S(e.$slots,"default")],46,Lo)}var ye=D(Bo,[["render",Ao],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const jo=He(No,{DropdownItem:Ee,DropdownMenu:ye}),Wo=fe(Ee),qo=fe(ye);export{Wo as E,qo as a,jo as b};
